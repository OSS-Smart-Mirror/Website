<!DOCTYPE html>
<html>
<head>
  <base href="https://engineering.purdue.edu/477grp1/"></base>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
  <meta name="keywords" content=""></meta>
  <meta name="description" content=""></meta>
  <meta name="author" content="George Hadley"></meta>
  <meta name = "format-detection" content = "telephone=no"></meta>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"></meta>
  
  <link rel="stylesheet" href="css/default.css" type="text/css" media="all"></link>
  <link rel="stylesheet" href="css/responsive.css"></link>
  <link rel="stylesheet" href="css/styles.css"></link>
  <link rel="stylesheet" href="css/content.css"></link>
  
  <title>ECE477 Course Documents</title>
</head>
<body>
  <script src="js/jquery.js"></script>
  <script src="js/jquery-migrate-1.1.1.js"></script>

  <script type="text/javascript">
  $(document).ready(function() {
      $("#header").load("header.html");
    $("#menu").load("navbar.html");
    $("#footer").load("footer.html");
  });
  </script>
  
  <div id="wrapper_site">
    <div id="wrapper_page">
      <div id="header"></div>
  	  <div id="menu"></div>
  	  <div id="banner"><img src="Files/img/BannerImgExample.jpg"></img></div>
  		<div id="content">
        <h2>Progress Report for Ishaan Ahuja</h2>

        <h4>Week 2:</h4>
          <b>Date: </b>08/30<br>
          <b>Total hours: </b>15<br>
          <b>Description of design efforts: </b><br>Began work on interfacing our chosen MCU STM32F051R8T6 due to familiarity from Rtvik, Abhay and Pratyakshâ€™s ECE 362. Currently interfacing the TMP36 and LDRs with the MCU using ADC channels 0 and 1 on Eclipse, and reading up more on STM32 architecture using the architecture manual from the ECE 362 website, as well as the datasheet for identifying the pins and available peripherals. Due to unfamiliarity with the STM, I will need to do more homework on calibrating values, as well as validating the data from the debug output. We will need to procure a heat gun/blow dryer to test the data.<br>
          <img src="https://components101.com/sites/default/files/inline-images/Circuit-using-Tmp36-Temperature-sensor.png" width="450" height="400"></img><br>
		    
        <h4>Week 3:</h4>
          <b>Date: </b>09/06<br>
          <b>Total hours: </b>14<br>
          <b>Description of design efforts:</b><br>
          <b>What I worked on this week: </b>Interfaced the TCRT 5000 Infrared sensors successfully with the STM32F0 MCU. It is currently being tested using the Debugger mode, and reflects a voltage change upon object detection. Also spent some time refining the temperature sensor value flickers using a refined algorithm.<br>
          <b>Things I learned this week: </b>I learned more about programming peripherals using ADC, Timers, and GPIO with STM32 as I had not encountered this in my ECE 362 microcontroller which used 9S12.<br>
          <b>Challenges: </b>It was initially difficult to interface the STM32 due to unfamiliarity with the micro, but it went smoothly after assistance from the staff and my teammates. I also learned to use the System Workbench properly, with the debugger mode, some assembly programming, and keeping track of variables and registers.<br>
          <b>Next week's tasks: </b>Next week will need simultaneous running of the STM32 peripherals TMP36 and the IR sensor, and if time permits the photoresistor also in that order. Below is an image of the TCRT 5000 circuit I have set up.<br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="https://cdn.instructables.com/FC2/G3QM/IXKPSR27/FC2G3QMIXKPSR27.LARGE.jpg?auto=webp&&frame=1&width=1024&height=1024&fit=bounds" width="400" height="350"></img><br>
		    
        <h4>Week 4:</h4>
          <b>Date: </b>09/13<br>
          <b>Total hours: </b>11<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>Finished up the TMP36 temperature sensor ADC code and demoed a debugger version to Dr. Thottethodi and GTA. It was working satisfactorily but they vetoed against the heat gun for test due to possibility of damaging the plastics.<br>
          <b>Things I learned this week: </b>I learned more about Timers in preparation for running asynchronous tasks and interrupt handlers.<br>
          <b>Challenges: </b>Unfamiliarity with the timer modules and IRQ handlers on STM32.<br>
          <b>Next week's tasks: </b>I will begin work on the Timers and running both the TMP36 and the IR Sensors together. The circuit for the LDR is to be changed as below.<br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="https://www.build-electronic-circuits.com/wp-content/uploads/2013/11/LDR-circuit-improved-1024x729.png" width="400" height="270"></img><br>

		    <h4>Week 5:</h4>
          <b>Date: </b>09/20<br>
          <b>Total hours: </b>7<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>I started working on USART to help Abhay since he was having problems with transmitting and receiving data from the STM32 and the computer terminal. We were able to successfully debug it and transmitted "HELLO" from the STM32 and received it on the computer terminal and hence now we have a fully functioning USART. I also worked on getting the LDR sensor to send its data to the STM32 using the circuit in the image above and decode it. We will use the LDR sensor for sensing ambient light data and use it to automatically adjust the brightness of the mirror.<br>
          <b>Things I learned this week: </b>I learnt a lot about the USART protocol since I was only familiar with UART.<br>
          <b>Challenges: </b>Unfamiliarity with USART protocol made it difficult to debug but I was familiar with UART so it made it a lot easier to understand the synchronous and asynchronous things used in USART.<br>
          <b>Next week's tasks: </b>I will begin working on integrating the code for USART and will test sending sensor data over it.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="Team/progress/img/initusart.png" width="500" height="300"></img><br>
          
        <h4>Week 6:</h4>
          <b>Date: </b>09/27<br>
          <b>Total hours: </b>12<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>I helped Abhay with the integration of the USART code with the sensor code in STM32. After successful integration, we were able to send 3 sample comma separated integers from the STM32 to the Jetson Nano and received them correctly. I also worked with Rtvik on the Eagle schematic of the project and made a very basic one with STM32 and other sensors with labels inserted.<br>
          <b>Things I learned this week: </b>I learnt a lot this week about PCB schematics and layouts since I have never taken any related course ever. I learnt how to use the PCB design software, Autodesk Eagle, to make the basic schematic of our project with Rtvik.<br>
          <b>Challenges: </b>I never had taken any PCB related course and hence had a lot of trouble understanding the basics of PCB designing but youtube and other online resources helped me to gain a better understanding about the whole process.<br>
          <b>Next week's tasks: </b>Rtvik and I will finish up the PCB schematic so that we could get started with the PCB layout.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/YBkz3S3.png" width="500" height="500"></img><br>
          
        <h4>Week 7:</h4>
          <b>Date: </b>10/04<br>
          <b>Total hours: </b>9<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>I worked on the Eagle schematic and the layout of the senosor components namely the temperature, LDR, and IR sensors. I also worked on the Eagle schematic and layout for the STM32 with Rtvik. Aparently, the temperature sensor was too sensitive to noise so I worked out an algorithm for making it less sensitive and it works perfectly.<br>
          <b>Things I learned this week: </b>I learnt alot about how to make a PCB layout in Eagle with traces, wires, layers, and other stuff.<br>
          <b>Challenges: </b>While coding the algorithm for the sensitivity of the temperature sensor, the value of temperature was changing when I had my hand near the IR sensor. This issue is called channel bleeding, where if we read the ADC channels too quickly, the value of one of the channels bleeds into the other channel. So to resolve this issue, we read all the ADC channels twice and it worked.<br>
          <b>Next week's tasks: </b>Comlpete the layouts for the two boards and prepare for the midterm design review.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/gGM5TJ4.png" width="400" height="350"></img><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/ZX8q855.png" width="400" height="350"></img><br>
        
        <h4>Week 9:</h4>
          <b>Date: </b>10/18<br>
          <b>Total hours: </b>8<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>After reviewing the comments given to us for our mideterm design review, I started working on connecting the USART module on the NVIDIA Jetson Nano itself and the STM32 directly instead of with the F232 USART module. After I made the required connections, I tried to send some test values from the STM32 to the Jetson but encountered an issue that the values werent being displayed on the Jetson. After debugging, I finally figured out the solution and now we can successfully send values from the STM32 to the Jetson directly over USART without requiring a seprerate module for it. I also worked on the sensor board layout with Rtvik to make the changes we were told to make during the midterm design review.<br>
          <b>Things I learned this week: </b>I have not programmed the NVIDA Jetson before so that was something new I had to learn how to do.<br>
          <b>Challenges: </b>I faced a major issue after connecting the STM32 with the Jetson. I was not able the see the values that I was sending from the STM32 being printed on the terminal of the Jetson. After careful debugging, I was able to fix this problem and now we can communicate between the STM32 and Jetson without requiring a seperate F232 USART module.<br>
          <b>Next week's tasks: </b>Send all sensor data from STM32 to Jetson and verify that data is being received properly.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="Team/progress/img/Hacks.JPG" width="400" height="400"></img><br>
          
        <h4>Week 10:</h4>
          <b>Date: </b>10/25<br>
          <b>Total hours: </b>7<br>
          <b>Description of design efforts:</b><br> 
          <b>What I worked on this week: </b>I worked on sending the sensor data from the STM32 to the Jetson via UART this week. It worked and we confirmed that the data was being received correctly on the Jetson. I also worked and helped Abhay and Rtvik with soldering the sensors onto the sensor PCB.<br>
          <b>Things I learned this week: </b>I have never soldered before so I had to learn soldering through Youtube and with the help from Rtvik as he knew how to solder.<br>
          <b>Challenges: </b>Soldering the surface mounts was very challenging since they are very small and require two people to actually solder them onto the sensor PCB. One person would hold the surface mount on the PCB with tweezers and the other would solder it onto the PCB.<br>
          <b>Next week's tasks: </b>Solder all the remaining parts onto our main PCB.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="Team/progress/img/soldering.jpg" width="400" height="400"></img><br>
          
        <h4>Week 11:</h4>
          <b>Date: </b>11/01<br>
          <b>Total hours: </b>10<br>
          <b>Description of design efforts:</b><br>
          <b>What I worked on this week: </b>I worked on soldering the remaining parts (STM32F0 chip, surface mounts, capacitors, barrel jack, header pins, etc...) onto the main PCB with Rtvik and Abhay. We were successful in soldering everything onto the main PCB except the crystal oscialltor since we did not have that part yet.<br>
          <b>Things I learned this week: </b>I learnt how to drag solder since we had to do that in order to solder the STM32F0 chip onto the PCB.<br>
          <b>Challenges: </b>After soldering everything, we had to test if the whole main PCB was working so we first tested out the voltage going inside the barrel jack and that was fine but the output of the barrel jack had a voltage of ~0.8V which is not correct. It should have been 3.3V. We asked Joe about it and he said that something might have shorted probably.<br>
          <b>Next week's tasks: </b>Unsoldering everything from the main PCB and shifting and soldering everything on another PCB and testing again if the voltage coming out of barrel jack is correct.<br><br>
          <img style="display: block; margin-left: auto; margin-right: auto;" src="Team/progress/img/IMG_2119.JPG" width="400" height="500"></img><br>
      </div>
  		<div id="footer"></div>
    </div>
  </div>
</body>
</html>