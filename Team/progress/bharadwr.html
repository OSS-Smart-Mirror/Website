<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
   This is an example weekly progress report document that team members can use to report their individual progress
   of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
   presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

   Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
   the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
   contact course staff.
   -->
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
      <base href="https://engineering.purdue.edu/477grp1/" />
      <!--Content-->
      <title>ECE477 Course Documents</title>
      <meta name="keywords" content="" />
      <meta name="description" content="" />
      <meta name="author" content="George Hadley">
      <meta name = "format-detection" content = "telephone=no" />
      <meta name="viewport" content="width=device-width,initial-scale=1.0">
      <!--CSS-->
      <link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
      <link rel="stylesheet" href="css/responsive.css">
      <link rel="stylesheet" href="css/styles.css">
      <link rel="stylesheet" href="css/content.css">
      <!--[if IE 6]>
      <link href="default_ie6.css" rel="stylesheet" type="text/css" />
      <![endif]-->
   </head>
   <body>
      <div id="wrapper_site">
         <div id="wrapper_page">
            <!-- Instantiate global site header.-->
            <div id="header"></div>
            <!-- Instantiate site global navigation bar.-->
            <div id="menu"></div>
            <!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
               img folder located at this directory level. -->
            <div id="banner">
               <img src="Files/img/BannerImgExample.jpg"></img>
            </div>
            <!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
               and include things such as a file lister (for listing out homework assignments or tutorials)
               -->
            <div id="content">
               <h2>Progress Report for Rtvik Sriram Bharadwaj</h2>
               <!-- what did you work on
                  how did you work on it
                  the result
                  what did you learn
                  next steps -->
               <h4>Week 1:</h4>
               <b>Date:</b> 8/23<br>
               <b>Total hours:</b> 3<br>
               <b>Description of design efforts:</b><br>
               Ordered parts necessary for the project, resistor kits, Nvidia Jetson Nano, spare STM32 for contingency, temperature sensor TMP36, Light dependent resistors, looking into IR sensors all on Amazon due to its loose 30 day return policy.
               Received parts with a defective Jetson (SD card could not be read easily), replacing that alone, need to test out individual components next week. Drew up basic sketch of the project, and completed Final Report draft.
               TODO by Week 3: Send expense reports to the ECE business office for part reimbursement.
               <img style="display: block; margin-left: auto; margin-right: auto;" src="Team/progress/img/overall_arch.jpg" height="600" width="450"></img>
               <br>
               <h4>Week 2:</h4>
               <b>Date:</b> 8/29<br>
               <b>Total hours:</b> 10<br>
               <b>Description of design efforts:</b><br>
               Successfully set up website, and progress report docs for the team. Opened a GitHub organization with all the team members to manage the code at https://github.com/OSS-Smart-Mirror. Successfully flashed the replacement Jetson with a lightweight OS, however requires a more stable power source. Looking into repurposing an old Google Home power adapter which has a stabilizer built in. Begun work with Ishaan on the STM32 interfacing the TM36 using ADC channel 0, but require a heat gun to calibrate/verify the data. Also planned out the UI and set up a Kanban board on the Github organization to track issues and assignees. Assigned tickets on UI development, STM32 USART Interfacing, LDR interfacing, and TMP36 interfacing between the team.
               TODO next week: Look into IEEE PCB workshop/Youtube tutorials to get an estimate of the duration it will take to complete this.
               <br>
               <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/avu8zzI.png" height="600" width="450"></img>
               <br>
               <h4>Week 3:</h4>
               <strong>Date:</strong> 9/4<br /> <strong>Total hours:</strong> 15<br /> <strong>Description of design efforts:</strong><br /> <strong> What I worked on this week: </strong> Begun work on the STM32 code with ADC channels and timers with interrupt handlers initialization, as well as a start on USART data transmission to the Jetson. This was mostly done on the STM32 SystemWorkbench, with some changes made on the Jetson terminal, namely writing scripts to redirect input data to a file, which can be tailed from the dashboard. <br /> <strong> Things I learned this week: </strong> With USART knowledge on the whole team being a bit rusty, this did not work first time and we spent a good amount of time revising old ECE 362 work, will need to get back to this after some organization on the power source side. I also read up on online API integration with our Tkinter dashboard. <br /> <strong> Challenges: </strong> Connecting the Jetson to a standard power source causes a screen flicker, and at times random shutdowns, need to source a proper part for this from Adafruit, part in consideration being a 5V 2.5A Switching power supply (GEO151UB-6025) and some cheaper alternatives. While there is an associated cost with ordering a dedicated power supply for this, it is of utmost importance that the Jetson's functionality is tip-top. Next steps would be to complete the code for a USART and the CFAL LED display to test the IRQHandlers and the ADC+GPIO reads of all sensors. While not conventional, stepping through the debugger does yield seemingly accurate results, but this does need proper validation using a heat gun with temperature control. <br /> <strong> Next week's tasks: </strong> To obtain and test a more stable power source, either a 5V 2.5A micro-USB or a 5V 4A barrel jack power method to the Jetson, continue progress on the API integration for location, weather, news and tickers. The part in consideration has been displayed below. <br /> <img style="display: block; margin-left: auto; margin-right: auto;" src="https://developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/gettingStarted/jetson-nano-dev-kit-power-block-r4-HR.png" width="400" height="350" /> <br /> <br />

               <h4>Week 4:</h4>
                  <b>Date:</b> 9/11<br>
                  <b>Total hours:</b> 8<br>
                  <b>Description of design efforts:</b><br>
                  <b> What I worked on this week: </b> This weeks work was inhibited by the industrial roundtable, but I have managed to complete the Py-News and Weather, Location APIs. We did this using the in-built urllib.requests library for Python3, as well as a Geocoder library that detects the user's address using their IP. The News API required JSON parsing of the BBC newsfeed API to extract headlines only, but this is a light operation considering the API requests only 8 headlines at max.<br> In regards to the temperature sensor testing, a heat gun was deemed as overkill as it may damage the plastics in the TMP36 sensor, and we have decided to use it in a temperature controlled environment and use body temperature from our fingers to detect a change.<br>
                  <b> Things I learned this week: </b> There is an associated cost of operation to running these API requests in the background, and updating the dashboard in the foreground. Careful thread implementation is needed to maximize the untapped potential of the Jetson Nano so far. I also learned that calibrating the TMP36 sensor might be an arduous task without the presence of a controlled low heat gun, due to its unavailability in lab. We will need to spend more time on validating this elsewhere. <br>
                  <b> Challenges: </b> Calibrating the TMP36 sensor is going be an arduous task in the absence of a controlled low heat gun, due to its unavailability in lab. We will need to spend more time on validating this elsewhere. This will need, as mentioned before, a temperature controlled environment like a room with an adjustable thermostat. We are planning to test this in Hawkins hall rooms, as well as using the mean body temperature data to see if the sensor detects our finger's temperature accurately.<br>
                  <b> Next week's tasks: </b> To integrate USART into the STM32 and Jetson, and add the LDR ADC read codes, along with procuring a larger micro SD Card for our Jetson Nano which cannot operate on a 16 GB SD Card. We will also need to add the complete TMP36 sensor circuit as planned below. Also added is the news API parsing code, which could use refinement.<br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://components101.com/sites/default/files/inline-images/Circuit-using-Tmp36-Temperature-sensor.png" height="270" width="400"></img>
                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/69FxZBt.png" height="150" width="400"></img>

               <h4>Week 5:</h4>
                  <b>Date:</b> 9/19<br>
                  <b>Total hours:</b> 7<br>
                  <b>Description of design efforts:</b><br>n
                  <b> What I worked on this week: </b>This week's work has been inhibited by extra-academic factors, and I have not been able to complete work on the STM32 component as a result. I have begun work on a lightweight Keras Neural Net to identify users locally, using a You-Only-Look-Once (YOLO) model, all done in Python3. This will fit into the project exactly as an external Face Identification API would, only it will be run locally. I decided on the YOLO network as it had superior runtimes when compared to Faster R-CNN and other classifiers, as well as an easy learning curve. <br>
                  <b> Things I learned this week: </b>I have been familiarizing myself with Keras and Tensorflow in order to better complete this portion of the project. I was also able to put some effort into OpenCV and the HaarCascade, which is able to isolate a user's face currently from a video feed.<br>
                  <b> Challenges: </b>Re-familiarizing myself with neural nets and image classifiers have been a challenge as I have not done this in a while. Time has also bee hard to come by this week due to other factors, and I was not able to proofread the documentation as was required, but have delegated it to the other members.<br>
                  <b> Next week's tasks: </b>To complete work on the network, obtaining a training set of users (pictures of the team members), and if time permits, of the course staff to add to the authenticated users list. Shown below is a basic layout on which YOLO is based, and what I'm currently translating to code.<br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://miro.medium.com/max/1200/1*m8p5lhWdFDdapEFa2zUtIA.jpeg" height="350" width="400"></img>
               <h4>Week 6:</h4>
                  <b>Date:</b> 9/26<br>
                  <b>Total hours:</b> 10<br>
                  <b>Description of design efforts:</b><br>
                  <b> What I worked on this week: </b>Completed a semi-functional facial recognition network and obtained training set of 2 images for each team member, and delegating validating responsiblity to each member for successful recognition. Currently based off of the Inception Neural Network Model created by GoogleNet, written in Keras with 5 epochs (for now). This is currently being merged with the Jetson Webcam Module to authenticate users upon wake detection. Work still required in this area. Also working on timer and IRQHandler integration for all sensors on the STM32F0. Currently updating a global temperature and LDR value, which is to be merged with existing USART code from Abhay.<br>Also started work on the Eagle schematic with Ishaan after feedback from the professor, with the basic STM32F0 and sensor labels inserted.
                  <b> Things I learned this week: </b>I learned how to work with the Eagle Schematics, working backwards from examples found online. I learned how to make a basic neural network using Keras, and went over the gritty details present in the Inception CNN Model, the program steps summarized in the table below. Have also re-learned the concept of timer and interrupt handlers from ECE 362 notes, and integration with ADC Channel reads.<br>
                  <b> Challenges: </b>The Keras network training time for 10 images total is around ~5 seconds, which is slow, but necessary. Am working on optimizations for this using First Order Optimization algorithms, but unfamiliarity poses a challenge. The timer related conecpts will need more re-learning as we have not used these in many months.<br>
                  <b> Next week's tasks: </b>Complete the entirety of the MCU Sensors, integrate with the USART and achieve data transmission to the Jetson and work on gesture parsing. Also expand on the PCB schematic, current version below (needs USART, prog. headers, power regulator breakouts).<br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2018/10/Screenshot-from-2018-10-16-11-56-41.png" height="350" width="400"></img>
                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/YBkz3S3.png" height="400" width="350"></img>

               <h4>Week 7:</h4>
                  <b>Date:</b> 10/3<br>
                  <b>Total hours:</b> 10<br>
                  <b>Description of design efforts:</b><br>
                  <b> What I worked on this week: </b>I spent most of the week on the PCB for the board, which we have now decided to break up into two components: the MCU Base and the Sensors. We chose this approach to allow us to test these modules independently, and minimize debugging efforts later in the semester. The board layout and schema (pending more feedback) for the Sensors have been shown below. Parts of the 2X2 Pin Headers did not work fluidly on the Board design UI, and we have hence reverted to a 3X2 Header which worked well, and also allows us more room to work with. The MCU schema needs re-wiring post-clarifications regarding VBAT, oscillator, and BOOT0. <br>
                  <b> Things I learned this week: </b>I gained more knowledge on the EAGLE interface from using the software more than I had the opportunity to the previous week. We also decided upon debugging strategies for the later semester, PCB and Jetson software wise. Working with external libraries for power regulators and other peripherals has also been explored in my work this week. <br>
                  <b> Challenges: </b>Working off EAGLE on Linux has been tricky, as I have had to change pre-installed libraries which have resulted in some glitches on the board interface, overly sensitive wiring, and odd autorouting which have more often than not been erroneous. Ambiguity over the need for VBAT and BOOT0 has also prevented us from completing the full board for the MCU, that being the sole roadblock this week. <br>
                  <b> Next week's tasks: </b>Complete design review slides and the MCU board layout by Monday, and incorporate any suggested changes from the course staff as required. <br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/gGM5TJ4.png" height="350" width="400"></img>
                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/ZX8q855.png" height="350" width="400"></img>

               <h4>Week 8:</h4>
                  <b>Date:</b> 10/11<br>
                  <b>Total hours:</b> 10<br>
                  <b>Description of design efforts:</b><br>
                  <b> What I worked on this week: </b>Completed Design Review presentation, and took into account requested changes to our PCB and idea of thinking, such abandoning the FT232R USART board and directly linking the STM32 to the Jetson, wire thickness and angles, resistor models and placement, capacitance value adjustments and missing ground planes amongst others. A significant number of these have since been ironed out, and are pending validation from the staff as early as Monday before we finalize and order from a suitable vendor. The new schematic and layouts have been attached below. <br>
                  <b> Things I learned this week: </b>I learned about the importance of proximity when dealing with decoupling capacitances, oscillators, and how right-angles in wires could potentially damage the board severely. I have also learnt much about neater PCB design from reviewing the boards of other teams in presentations, taking into account hacks that they used to make their boards more compact. <br>
                  <b> Challenges: </b>The primary challenges I faced during board layout placement were restrictions in spacing and picking the correct model of resistances, and carefully calculating capacitance values. A large amount of feedback was received and needed taking into account, and I had to hence ripup several wires and work around wire placements to meet course staff expectations.<br>
                  <b> Next week's tasks: </b>Validate and order PCBs, validate STM32 and Jetson dash integration of sensor data and gesture recognition, gather larger training set of images for neural network. <br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/mRBU9Lc.png" height="350" width="400"></img>
                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://i.imgur.com/uBLiIT2.png" height="350" width="400"></img>

               <!-- <h4>Week N:</h4>
                  <b>Date:</b> -Enter today's date here-<br>
                  <b>Total hours:</b> -Enter the number of hours you worked this week here-<br>
                  <b>Description of design efforts:</b><br>
                  <b> What I worked on this week: </b>INSERT TEXT HERE<br>
                  <b> Things I learned this week: </b>INSERT TEXT HERE<br>
                  <b> Challenges: </b>INSERT TEXT HERE<br>
                  <b> Next week's tasks: </b>INSERT TEXT HERE<br>

                  <img style="display: block; margin-left: auto; margin-right: auto;" src="IMAGE_URL_HERE" height="350" width="400"></img>
               -->
            </div>
            <br>
         </div>
         <!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
         <div id="footer"></div>
      </div>
      </div>
      <!--JS-->
      <script src="js/jquery.js"></script>
      <script src="js/jquery-migrate-1.1.1.js"></script>
      <script type="text/javascript">
         $(document).ready(function() {
             $("#header").load("header.html");
         	$("#menu").load("navbar.html");
         	$("#footer").load("footer.html");
         });
      </script>
   </body>
</html>
